option_settings:
    aws:elasticbeanstalk:application:environment:
        DJANGO_SETTINGS_MODULE: "core.settings"
        # Ensure the inner 'core' folder (where manage.py and the project package live)
        # is on the PYTHONPATH so imports resolve when the app is deployed from the repo root.
        PYTHONPATH: "/var/app/current/core:/var/app/current"
    aws:elasticbeanstalk:container:python:
        # Use forward slashes and the path relative to the application root.
        WSGIPath: "backend/core/wsgi.py"
container_commands:
  01_migrate:
    command: "python manage.py migrate --noinput"
    leader_only: true

  02_collectstatic:
    command: "python manage.py collectstatic --noinput"
    leader_only: true